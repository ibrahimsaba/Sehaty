@if(isLoading){
  <app-loading-spinner></app-loading-spinner>
}@else {
    <section id="dashboard" class="dashboard">
    <div class="doctor-details-wrapper">
        <div class="dashboard__title">
            <h2 class="dashboard__title-main">Edit Medical Record</h2>
            <p class="dashboard__title-sub">
                Update Medical Record of: {{medicalRecord.patientName}}
            </p>
        </div>
        <div class="patient-edit">
            <div class="patient-edit__card" style="padding-top: 2rem;">
            <form [formGroup]="recordForm" (ngSubmit)="onSubmit()">

                @if(serverError){
                <div class="server-error">
                    <span>{{ serverError }}</span>
                </div>
                }
                <div class="patient-edit__grid">

                    <!-- Record Type -->
                    <div class="patient-edit__input patient-edit__input--status">
                        <label class="patient-edit__status-label">Record Type</label>
                        <p-dropdown
                        formControlName="recordType"
                        [options]="recordTypeOptions"
                        placeholder="Select Record Type">
                        </p-dropdown>
                    </div>

                    <!-- Symptoms -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="symptoms" />
                        <label>Symptoms</label>
                    </p-floatlabel>

                    <!-- Diagnosis -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="diagnosis" />
                        <label>Diagnosis</label>
                    </p-floatlabel>

                    <!-- Treatment Plan -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="treatmentPlan" />
                        <label>Treatment Plan</label>
                    </p-floatlabel>

                    <!-- BP Systolic -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="bpSystolic" type="number" />
                        <label>BP Systolic</label>
                    </p-floatlabel>

                    <!-- BP Diastolic -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="bpDiastolic" type="number" />
                        <label>BP Diastolic</label>
                    </p-floatlabel>

                    <!-- Temperature -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="temperature" type="number" />
                        <label>Temperature (Â°C)</label>
                    </p-floatlabel>

                    <!-- Heart Rate -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="heartRate" type="number" />
                        <label>Heart Rate (bpm)</label>
                    </p-floatlabel>

                    <!-- Weight -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="weight" type="number" />
                        <label>Weight (kg)</label>
                    </p-floatlabel>

                    <!-- Notes -->
                    <p-floatlabel class="patient-edit__input">
                        <input pInputText formControlName="notes" />
                        <label>Notes</label>
                    </p-floatlabel>
                </div>

                <div class="patient-edit__button-container">
                    <p-button 
                        type="submit" 
                        label="Update Medical Record" 
                        [disabled]="recordForm.touched && recordForm.invalid"
                    ></p-button>
                </div>

            </form>
            </div>
        </div>
    </div>

</section>
}